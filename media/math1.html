<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏•‡∏Ç</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 30px; }
    input, button { font-size: 16px; padding: 8px; }
    input { width: 300px; }
    #steps { margin-top: 20px; font-size: 18px; white-space: pre-wrap; }
    .example { font-size: 14px; color: gray; margin-top: 5px; }
  </style>
</head>
<body>

  <h2>üî¢ ‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏•‡∏Ç ‡πÄ‡∏ä‡πà‡∏ô: (2 + 3) * 4</h2>
  <input id="expression" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...">
  <button onclick="solve()">‡πÄ‡∏â‡∏•‡∏¢</button>
  <div class="example">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: 2 + 3 * (4 - 1)</div>

  <div id="steps"></div>

  <script>
    function solve() {
      const input = document.getElementById("expression").value;
      const stepsDiv = document.getElementById("steps");

      try {
        // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
        const node = math.parse(input);
        const steps = [];

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏à‡∏≤‡∏Å parse tree
        function walk(node) {
          if (node.type === 'OperatorNode') {
            const left = walk(node.args[0]);
            const right = walk(node.args[1]);
            const result = math.evaluate(`${left} ${node.op} ${right}`);
            steps.push(`‚úèÔ∏è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì: ${left} ${node.op} ${right} = ${result}`);
            return result;
          } else {
            return node.toString();
          }
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô
        const result = walk(node);
        steps.push(`\n‚úÖ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢: ${result}`);

        stepsDiv.innerText = steps.join('\n');
      } catch (err) {
        stepsDiv.innerHTML = `<p style="color:red;">‚ùå ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</p>`;
      }
    }
  </script>
    <footer>
        <p>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á : ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏™‡∏±‡∏°‡∏§‡∏ó‡∏ò‡∏¥‡πå ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô A &copy; 2025</p>
    </footer>
</body>
</html>